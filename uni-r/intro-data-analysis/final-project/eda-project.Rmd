---
title: "Korelacja między Edukacją a zarobkami"
subtitle: "Projekt zaliczeniowy z przedmiotu \"Wstęp do analizy danych\""
author: "Paulina Kania"
date: "2026-sty"
output: 
  html_document:
        toc: true
        toc_depth: 3
        toc_float: true

---

# Wstęp

## Cel projektu
> *"Czy ścieżka STEM to jedyna droga do sukcesu w Stanach Zjednoczonych"*

Ameryka jest jednym z najbardziej skomplikowanych państw na świecie – z bardzo intrygującym systemem edukacji. Moim głównym zamysłem początkowo było dokonanie analizy kierunków powiązanych z popularnym określeniem **"STEM" – science, technology, engineering and mathematics**, gdyż kierunki i uczelnie z tym słowem powiązane są najbliższe motywowi edukacji AGH. Jednakże przy aktualnej dominacji rynku technologicznego (STEM) nad pozostałymi dziedzinami, np. humanistycznymi (liberal arts), warto też porównać zarobki absolwenta informatyki (Computer Science) do przykładowo historyka (History). Dane z Kaggle są co prawda lekko przestarzałe (ponieważ powstały 9 lat temu), jednak trend wzrostu technologicznego pojawił się długo przedtem. Należy pamiętać, że od tego czasu rynek technologiczny przeszedł dynamiczne zmiany (rozwój AI i pandemia), co mogło jeszcze bardziej powiększyć dystans między STEM a innymi dziedzinami. Istnieje popularny motyw, o którym głośno na zagranicznych portalach społecznościowych – o „humanistycznym długu”, czyli fakt, iż zadłużenie studenckie (student loans) przerasta średnie zarobki po ukończeniu studiów. W poniższej analizie postaram się przybliżyć zagadnienia związane z wybranym tematem.

## Dane użyte w analizie

```{r}
# Pobieranie danych z plików pobranych z strony Kaggle
degreesThatPayBack <- read.csv("degrees-that-pay-back.csv")
salariesByCollegeType <- read.csv("salaries-by-college-type.csv")
salariesByRegion <- read.csv("salaries-by-region.csv")
```

Dane pochodzą z: <https://www.kaggle.com/datasets/wsj/college-salaries?resource=download>

### Zawartość i Struktura
```{r, echo=FALSE, warning=FALSE, message=FALSE}
library(tidyverse) # :p
```
```{r}
glimpse(degreesThatPayBack)
glimpse(salariesByCollegeType)
glimpse(salariesByRegion)
```

---

# Przygotowanie danych

## Biblioteki
- tidyverse: pakiet podstawowy do analizy danych
- datawizard: dla funckji data_rotate()
- knitr: estetyka i czytelność
- corrplot: dla macierzy korelacji
```{r, echo=TRUE, warning=FALSE, message=FALSE}
library(knitr)
library(datawizard)
library(corrplot)
library(tidyverse)
```

## Data cleaning

### degrees-that-pay-back.csv

```{r, echo=TRUE}
degree <- degreesThatPayBack
str(degree)
```

Na pierwszy rzut oka można zauważyć już wstępne problemy, czyli bardzo długie tytuły kolumn jak i nieużywalny format danych zapisanych jako "chr" zamiast "num".

```{r}
degree <- rename(
  degree,
  major = Undergraduate.Major, 
  career_start = Starting.Median.Salary, 
  career_mid = Mid.Career.Median.Salary,
  p_change = Percent.change.from.Starting.to.Mid.Career.Salary,
  p10_salary = Mid.Career.10th.Percentile.Salary,                
  p25_salary = Mid.Career.25th.Percentile.Salary,               
  p75_salary = Mid.Career.75th.Percentile.Salary,            
  p90_salary = Mid.Career.90th.Percentile.Salary
  )

colnames(degree)

degree <- degree %>%
  mutate(
    career_start = as.numeric(str_replace_all(career_start, "[\\$,]", "")),
    career_mid = as.numeric(str_replace_all(career_mid, "[\\$,]", "")),
    p10_salary = as.numeric(str_replace_all(p10_salary, "[\\$,]", "")),
    p25_salary = as.numeric(str_replace_all(p25_salary, "[\\$,]", "")),
    p75_salary = as.numeric(str_replace_all(p75_salary, "[\\$,]", "")),
    p90_salary = as.numeric(str_replace_all(p90_salary, "[\\$,]", ""))
    )

# kolumna p_change to: (degree$career_mid-degree$career_start)/degree$career_start*100, czyli wzrost procentowy na bazie roku startowego 

kable(head(degree))
```
Teraz kolej na pozostałe pliki - które wykonam analogicznie.

### salaries-by-college-type.csv
```{r}
college <- salariesByCollegeType
str(college)

college <- college %>%
  rename(
    university = School.Name,
    type = School.Type,
    career_start = Starting.Median.Salary, 
    career_mid = Mid.Career.Median.Salary,
    p10_salary = Mid.Career.10th.Percentile.Salary,                
    p25_salary = Mid.Career.25th.Percentile.Salary,               
    p75_salary = Mid.Career.75th.Percentile.Salary,            
    p90_salary = Mid.Career.90th.Percentile.Salary
  )

college <- college %>%
  mutate(
    career_start = as.numeric(str_replace_all(career_start, "[\\$,]", "")),
    career_mid = as.numeric(str_replace_all(career_mid, "[\\$,]", "")),
    p10_salary = as.numeric(str_replace_all(p10_salary, "[\\$,]", "")),
    p25_salary = as.numeric(str_replace_all(p25_salary, "[\\$,]", "")),
    p75_salary = as.numeric(str_replace_all(p75_salary, "[\\$,]", "")),
    p90_salary = as.numeric(str_replace_all(p90_salary, "[\\$,]", ""))
  )

kable(head(college))
```
Zauważyłam już przy pierwszym wglądzie w dane, iż jest dużo brakujących pozycji w kolumnach percentylowych – i nie byłam pewna, na ile to może zakłócić moją analizę. Przy „mutacji” zawartości na liczbowe, tekstowy zapis "N/A" zmienił się na prawdziwy i odczytany przez R "NA", przez co biblioteka naniar wykryje, gdzie dokładnie mam dziury w danych.

Jedyne braki danych mam w uzupełniających się kolumnach 90- i 10-percentylowych, więc w dalszej analizie albo muszę znaleźć sposób na ominięcie ich, albo używać 25- i 75-percentyli.

### salaries-by-region.csv

```{r}
region <- salariesByRegion
str(region)

region <- region %>%
  rename(
    university = School.Name,
    career_start = Starting.Median.Salary, 
    career_mid = Mid.Career.Median.Salary,
    p10_salary = Mid.Career.10th.Percentile.Salary,                
    p25_salary = Mid.Career.25th.Percentile.Salary,               
    p75_salary = Mid.Career.75th.Percentile.Salary,            
    p90_salary = Mid.Career.90th.Percentile.Salary
  )

region <- region %>%
  mutate(
    career_start = as.numeric(str_replace_all(career_start, "[\\$,]", "")),
    career_mid = as.numeric(str_replace_all(career_mid, "[\\$,]", "")),
    p10_salary = as.numeric(str_replace_all(p10_salary, "[\\$,]", "")),
    p25_salary = as.numeric(str_replace_all(p25_salary, "[\\$,]", "")),
    p75_salary = as.numeric(str_replace_all(p75_salary, "[\\$,]", "")),
    p90_salary = as.numeric(str_replace_all(p90_salary, "[\\$,]", ""))
  )
kable(head(region))

```


---

# Exploratory Data Analysis (EDA)

## Pytania Badawcze

### Pytanie 1: Czy dominacja STEM to fakt czy mit? 
Porównanie podstawowych statystyk opisowych (mediana, średnia, odchylenie standardowe) dla kierunków STEM oraz pozostałych dziedzin na początku i w środku kariery 

Mając tabelę "degree", widać wszystkie reprezentowane kierunki studiowania, ale bez dokładnego oznaczenia, do których z typów studiów (STEM, human czy zarządzanie) należą. By dokonać ogólnej analizy, musimy ustalić typ studiów jak i ich ogólną kategorię – dla uproszczenia analizy będzie to STEM vs others.

```{r}

engineering <- c("Aerospace Engineering", "Chemical Engineering", "Civil Engineering", 
  "Computer Engineering", "Electrical Engineering", "Industrial Engineering", 
  "Mechanical Engineering", "Architecture")

tech <- c("Computer Science", "Information Technology (IT)", 
  "Management Information Systems (MIS)")

math <- c("Math")

science <- c("Biology", "Chemistry", "Geology", "Physics", 
             "Nursing", "Nutrition", "Physician Assistant")

liberalart <- c("Anthropology", "Art History", "Communications", "Criminal Justice", 
  "Drama", "Education", "English", "Film", "Geography", "History", 
  "Journalism", "Music", "Philosophy", "Political Science", 
  "Psychology", "Religion", "Sociology", "Spanish", "International Relations")

business <- c("Accounting", "Business Management", "Economics", "Finance", 
  "Marketing", "Hospitality & Tourism", "Health Care Administration",
  "Construction", "Agriculture", "Forestry", "Graphic Design", "Interior Design")

degree <- degree %>% 
  mutate(
    type = case_when(
      major %in% engineering ~ "Engineering",
      major %in% tech ~ "Technology",
      major %in% math ~ "Mathematics",
      major %in% science ~ "Science",
      major %in% liberalart ~ "Liberal Arts",
      major %in% business ~ "Business"
    )
  )

table(degree$type)

degree <- degree %>% 
  mutate(
    category = case_when(
      type %in% c("Engineering", "Technology", "Mathematics", "Science") ~ "STEM",
      TRUE ~ "Others"
    )
  )

table(degree$category)
```

Patrząc wstępnie na liczbę występowania każdego typu studiów, muszę niestety zwrócić uwagę na jeden kierunek matematyczny. W polskim systemie posiadamy matematykę stosowaną, fizyczną i tym podobne, ale na liście niestety nie ma takich wyróżnień. Poza tym podział jest w miarę zrównoważony z zauważalnym wyżem w Liberal Arts jak i Business, gdyż są to szersze kategorie i sumując wszystkie kierunki STEM, nie osiągają one przewagi liczbowej.

```{r}
# Statystyka Opisowa
degreestart <- degree %>% group_by(category) %>%
  summarise(
    mean_start = mean(career_start),
    median_start = median(career_start),
    max_start = max(career_start),
    min_start = min(career_start),
    range_start = max(career_start)-min(career_start),
    sd_start = sd(career_start),
  )

degreestart <- data_rotate(degreestart, colnames = TRUE)
degreestart

# przewaga średniej
degreestart$STEM[1]/degreestart$Others[1]
# róznica średniej
degreestart$STEM[1]-degreestart$Others[1]
```

Już w pierwszej analizie statystycznej widać różnicę między kierunkami technicznymi a pozostałymi. Średnia zarobków jest prawie 34% wyższa dla absolwentów STEM już na początku kariery – a co ciekawe, mediana dla STEM jest prawie równa wartości maksymalnej dla pozostałych kierunków. Grupa "others" charakteryzuje się jednak znacznie większą przewidywalnością – niskie odchylenie standardowe i relatywnie mały rozstęp (range). Kierunki techniczne wykazują się większym zróżnicowaniem wewnętrznym.

```{r}
degreemid <- degree %>% group_by(category) %>%
  summarise(
    mean_mid = mean(career_mid),
    median_mid = median(career_mid),
    max_mid = max(career_mid),
    min_mid = min(career_mid),
    range_mid = max(career_mid)-min(career_mid),
    sd_mid = sd(career_mid),
  )
degreemid <- data_rotate(degreemid, colnames = TRUE)
degreemid

# przewaga średniej
degreemid$STEM[1]/degreemid$Others[1]
# różnica średniej
degreemid$STEM[1]-degreemid$Others[1]
```

Z ciekawszych obserwacji: mimo wzrostu różnicy średnich w środku kariery (porównując do początkowej wartości), różnica procentowa zmalała. Warto też spojrzeć na maksymalną wartość dla kierunków nie-STEM i medianę dla STEM – wartości są bardzo do siebie zbliżone, co sugeruje porównywalność „sufitu humanistów” a „podłogi inżynierów”. 

Odchylenie dla obu grup skoczyło w górę, po 10 latach w zawodzie już nie tylko studia decydują o zarobkach, ale grono zewnętrznych czynników, a zarobki minimalne są bardzo do siebie zbliżone.

```{r}
degree %>% 
  ggplot(aes(career_start)) + 
  geom_histogram(fill="palegreen3", colour="darkgray", binwidth=10000, alpha=0.6) +
  geom_histogram(aes(career_mid), fill="orchid3", colour="darkgray", binwidth=10000, alpha=0.6) +
    labs(title = "Histogram zarobków (skala w 10000$)",
         subtitle="Zielony - początek kariery, fioletowy - po 10 latach ukończenia studiów",
      x="Zarobki w dollarach ($)",
      y="Ilość kierunków w danym przedziale",
    ) +
  theme_bw()

```

### Pytanie 2: Jak wygląda prędkość rozwoju wynagrodzeń.
Identyfikacja kierunków o największym i najmniejszym przyroście płac w czasie, czy absolwenci nauk humanistycznych z czasem zmniejszają dystans finansowy do grup STEM.

```{r}
degree %>%
  arrange(desc(p_change)) %>%
  head(15) %>%
  ggplot(
    aes(x=reorder(major, p_change), y=p_change, fill=category)
    ) + 
  geom_col()+
  scale_fill_manual(values=c('STEM'='plum2', 'Others'='skyblue1')) +
  coord_flip() +
  labs(title = "Największe zmiany procentowe kariery: Start vs po 10 latach",
       x = NULL,
       y = "Zmiana wyrażona w procentach (%)") + theme_bw()
```

```{r}

degree %>%
  arrange(desc(p_change)) %>%
  tail(15) %>%
  ggplot(
    aes(x=reorder(major, p_change), y=p_change, fill=category)
    ) + 
  geom_col() +
  scale_fill_manual(values=c('STEM'='plum2', 'Others'='skyblue1')) +
  coord_flip() +
  labs(title = "Najmniejsze zmiany procentowe kariery: Start vs po 10 latach",
       x = NULL,
       y = "Zmiana wyrażona w procentach (%)") + theme_bw()

```

Choć inżynierowie zarabiają więcej kwotowo - humaniści i "biznesowcy" wykazują się dynamiczną adaptacją. Choć po wyjściu z uczelni ich zarobki nie konkurują z płącą dla STEM, dużo z nich zyskuje w dalszej części kariery. Co zaskakujące dwa kierunki medyczne - Asystent lekarski i Pielęgniarstwo ukazują odstającą od reszty braku rozwoju. Mają świetny start ale bardzo mały "sufit".

```{r}
degree %>% 
  group_by(type) %>% 
  top_n(5, career_mid) %>%
  ggplot(
    aes(y = reorder(major, career_mid), colour=type)
    ) +
  geom_segment(
    aes(x=career_start, xend=career_mid), 
    linewidth=1.2 
    ) +
  scale_color_manual(values=c('Engineering'='deepskyblue2', 'Mathematics'='deepskyblue4', 'Science'='darkseagreen4', 'Technology'='seagreen3', 'Liberal Arts'='plum1', 'Business'='plum3')) +
  theme_bw() +
  labs(
    title = "Zmiany 10-letnich karier absolwentów",
    x = "Zarobki w ($)",
    y = NULL,
  ) + 
  scale_x_continuous(limits= c(min(degree$career_start),max(degree$career_mid))) 
```

Powyższy wykres przedstawia moment startowy kariery i zmiane procentową do momentu średniego - i wybrałam tu 5 najlepiej zarabiających kierunków podzielonych na kategorie "type". Wykres pomaga zobrazować jak zmiana procentowa po 10 latach wygląda na faktycznych zarobkach. Mimo dużych wzrostów procentowych humaniści i "business" studenci przy realnych liczbach kuleją przy zarobkach STEM. Co ciekawe - dobrze widać tu zarobki asystenta lekarskiego (Physician Assistant). Mimo bardzo małej zmiany zarobków dalej utrzymuje się w topce wszystkich kierunków, co pokazuje, że niski sufit nie jest wcale taki zły gdy pokój się znajduje na metaforycznym 15stym piętrze.

### Pytanie 3: Wewnętrzna hierarchia "Imperium STEM" - która dziedzina dominuje.  

```{r}
cor_data <- degree %>%
  mutate(
    is_stem = ifelse(category == "STEM", 1, 0)
    ) %>%
  select(is_stem, career_start, career_mid, p_change)  

cor = cor(cor_data)
corrplot(cor, method = "color", type = "upper", tl.col = "black", diag = FALSE)
```

Macierz korelacji pokazuje silną dodatnią zależność między przynależnością do grupy STEM a wynagrodzeniem początkowym (z ujemną korelacją co do procentu zmiany) więc warto sobie zadać pytanie: która z subdziedzin faktycznie króluje...

```{r}

degree %>%
  filter(category=="STEM") %>%
  ggplot(
    aes(y = reorder(major, career_mid), x = career_mid, fill = type)) +
  geom_col() +
  scale_fill_manual(values=c('Engineering'='deepskyblue2', 'Mathematics'='deepskyblue4', 'Science'='darkseagreen4', 'Technology'='seagreen3')) +
  labs(
    title = "Kto króluje w STEM",
    x = "Zarobki w dollarach ($)",
    y = NULL,
  ) + theme_bw()
  
```

Już na pierwszy rzut oka widać wyraźną przewagę kierunków inżynieryjnych (Engineering), które okupują szczyt zestawienia. Warto zwrócić uwagę na pozycję kategorii Technology. Choć w badanych danych trzyma się ona tuż za inżynierią, współczesny boom na technologie AI prawdopodobnie wyniósł te profesje ponad "tradycyjną naukę" (Science). Termin "STEM" jest nadużywany jako gwarancja sukcesu. Prawdziwe pieniądze leżą w "TE".

### Pytanie 4: Wskazanie kierunków "bezpiecznych" oraz tych o wysokim risk/reward.

```{r}
degree %>% ggplot(aes(x = career_mid, y = reorder(type, career_mid), fill = type)) +
  geom_boxplot(alpha = 0.7) +
  theme_bw() +
  scale_fill_manual(values=c('Engineering'='deepskyblue2', 'Mathematics'='deepskyblue4', 'Science'='darkseagreen4', 'Technology'='seagreen3', 'Liberal Arts'='plum1', 'Business'='plum3')) +
  labs(title = "Stabilność finansowa",
       subtitle = "Rozkład zarobków w środku kariery według typu edukacji",
       y = NULL, 
       x = "Wynagrodzenie w ($)")
```

Najdziwniejszą pozycją wykresu jest pozycja "Mathematics", jednak objaśnienie jest proste: pod tą kategorią jest podpięty jedynie jeden kierunek. Kategoria zatem jest praktycznie niemożliwa do przedstawienia na wykresie Boxplot. Innymi ciekawymi pozycjami to "Business" i "Science" które mają bardzo szerokie pudełka. Oznacza to dużą niepewność. Wrzuca się też w oko jeden Outlier w kategorii Engineering. 

```{r}
degree %>%
  group_by(type) %>%
  top_n(5, career_mid) %>%
  ggplot(
    aes(y = reorder(major, p75_salary), color=type)
    ) +
  geom_segment(
    aes(x=p25_salary, xend=p75_salary), linewidth=1.2,) +
  theme_bw() +
  scale_color_manual(values=c('Engineering'='deepskyblue2', 'Mathematics'='deepskyblue4', 'Science'='darkseagreen4', 'Technology'='seagreen3', 'Liberal Arts'='plum1', 'Business'='plum3')) +
  labs(
    title = "Rozpiętość płac",
    x = "Wynagrodzenie w ($)",
    y = NULL,
    subtitle = "Różnica między najlepiej a najgorzej zarabiającymi absolwentami"
  ) + 
  scale_x_continuous(limits= c(min(degree$p25_salary),max(degree$p75_salary)))
```

Niespodziewanie pozycje numer jeden zajmuje Ekonomia o bardzo szerokiej rozpiętości. Oznacza to niepewne zarobki przyszłościowe dla absolwentów. Oczywiście ekonomia łączy z sobą dużo ścisłych jak i humanistycznych zagadnień, dzięki czemu absolwenci mogą znaleść pracę w dużej ilości dziedzin. Po ukończeniu studiów wiele czynników zewnętrznych wpływa na to jak wygląda płaca ekonomisty. Jest to trend dla wielu biznesowych i humanistycznych kierunków, gdzie płace STEM charakteryzują się mniejszą rozpiętością. Zaczynają wyżej zarobkowo ale względnie wiekszość stanowisk są równomiernie prestiżowe, w porównaniu z innymi dziedzinami.

### Pytanie 5: Sufit zarobkowy: STEM vs. Biznes.  
Sprawdzenie, która z grup szybciej osiąga pełny potencjał zarobkowy (z osobistej ciekawości studiując Informatyke na Wydziale Zarządzania).

```{r}
degree %>% 
  filter(type == "Business" | category=="STEM") %>%
  ggplot(
    aes(x = career_start, y = p90_salary, color = type)
    ) +
  geom_point(size = 3, alpha = 0.6) +
  theme_bw() +
  geom_smooth(method = "lm", se=F) +
  scale_color_manual(values=c('Engineering'='deepskyblue2', 'Mathematics'='deepskyblue4', 'Science'='darkseagreen4', 'Technology'='seagreen3', 'Business'='plum3')) +
  labs(
    title = "Start kariery vs. Sufit finansowy",
    x = "Płaca początkowa",
    y = "90. percentyl zarobków"
    )
```

Na wykresie powyżej widać w sposób dosłowny sufit finansowy o którym ciągle wspominam. 90-ty percentyl to inaczej 10 procent najlepiej zarabiających absolwentów danego kierunku. "Business" zaczyna nisko lecz niesamowicie wysoko wystrzela zakłądając najlepsze dla studenta warunki. Inżynierowie natomiast są bardziej stabilni. Kąt nachylenia linii którą tworzą niebieskie punkty jest mniejszy niż ten dla Business, jednak kropki zaczynają z wiele wiekszymi zarobkami początkowymi.

### Pytanie 6: Anomalie wśród kierunków nie-STEM.  
Identyfikacja konkretnych kierunków które przechodzą niestandardowy dla swojej kategorii wzrost.

Ekonomia jak i inne kierunki "Business" ewidentnie się odznaczały przy porównywaniu z STEM. Jednak warto również popatrzeć troche głębiej łącząc Business i Liberal Arts, i dokonać na tych kategoriach osobną analize.

```{r}
degree %>% 
  filter(category=="Others") %>%
  ggplot(
    aes(x = career_start, y = p90_salary, color = type)
    ) +
  geom_point(size = 3, alpha = 0.6) +
  geom_smooth(method = "lm", se=F) +
  theme_bw() +
  scale_color_manual(values=c('Liberal Arts'='plum1', 'Business'='plum3')) +
  labs(
    title = "Anomalie dla kierunków nie-STEM",
    x = "Płaca początkowa",
    y = "90. percentyl zarobków"
    )
```

Widać, iż większość Outlierów pochodzą jednak z kategorii business - oprócz filozofii (Philosophy). Pozostałe kierunki układają sie w podobnej ćwiartce wykresu (przy zarobkach startowych w wysokosci 40000$ i suficie percentylowym 150000$).

```{r}
table(college$type)
table(region$Region)
```

Przeglądając pozostałe dwa datasety, wrzucają sie w oczy wartości typu uczelni i regionu. Tu typ uczelni "engineering" to nie to samo co kierunek "engineering" choć sugeruje, iż na takiej uczelni istnieje dużo inżynierskich kierunków. W ostatniej części EDA przyjrzymy się jak te wartości kształtują całokształt edukacji w Ameryce Północnej.

### Pytanie 7: Prestiż Ivy League vs. State Schools.
czy "historyk z Harvardu" zarabia więcej niż "informatyk z uczelni stanowej"? Czy nazwa uczelni niweluje różnice między kierunkami?

```{r}
college %>% 
  ggplot(aes(x = type, y = career_mid, fill = type)) +
  geom_boxplot() +
  coord_flip() +
  theme_bw() +
  scale_fill_manual(values=c('Engineering'='plum1', 'Ivy League'='plum3', 'Liberal Arts'='hotpink3', 'Party'='lightblue4', 'State'='skyblue2')) +
  labs(
    title = "Wykres pudełkowy według typu uczelni",
    y = "Wynagrodzenie po 10 latach w ($)",
    x = "Typ uczelnii"
  )

```

Na wykresie widać dużo wartości odstających dla kategorii "State".

```{r}
ivystate <- college %>%
  filter(type %in% c("Ivy League", "State", "Engineering")) %>%
  group_by(type) %>%
  summarise(
    count = n(),
    median_start = median(career_start, na.rm = TRUE),
    median_mid = median(career_mid, na.rm = TRUE),
    p10 = median(p10_salary, na.rm = TRUE),
    p90 = median(p90_salary, na.rm = TRUE),
    max_mid = max(career_mid, na.rm = TRUE)
  ) %>%
  arrange(desc(median_mid))

kable(ivystate)
```

Zazwyczaj uczelnie typu Engineering oferują wyższy start niż Ivy League, a najniżej wynagradzani inżynierowie również zarabiają lepiej niż ich rówieśnicy z innych grup. Oznacza to, że rynek płaci za twarde umiejętności „od zaraz”. Ivy League często jednak przegania kierunki techniczne po 10 latach pracy. Dlaczego? Ponieważ prestiż otwiera drzwi do zarządów oraz daje możliwości networkingowe, co wyraźnie widać w zarobkach górnych 10% absolwentów.

Mediana zarobków,  zarówno początkowa, jak i po 10 latach, jest dla Ivy League znacznie wyższa niż dla uczelni stanowych (State). Dowodzi to, że marka uczelni faktycznie działa jak dopalacz kariery, niezależnie od tego, czy absolwent ukończył historię, czy kierunek STEM. Najbardziej lukratywne uczelnie to:

```{r}
college %>%
  filter(type %in% c("Ivy League", "State", "Engineering")) %>%
  arrange(desc(career_mid)) %>%
  head(20) %>%
  ggplot(
    aes(x = career_mid, y = reorder(university, career_mid), fill = type)
    ) +
  geom_col() +
  scale_fill_manual(values=c('Engineering'='plum1', 'Ivy League'='plum3', 'State'='skyblue2')) +
  theme_bw() +
  labs(title = "Szczyt wynagrodzenia",
       subtitle = "Top 20 uczelni pod względem zarobków w środku kariery",
       x = "Mediana zarobków w ($)",
       y = NULL)
```

### Pytanie 8: Korelacja miedzy stabilnością finansową a typem uczelnii.

```{r}
college %>%
  ggplot(aes(x = career_mid, fill = type)) +
  geom_density(alpha = 0.5) +
  theme_bw() +
  scale_fill_manual(values=c('Engineering'='plum1', 'Ivy League'='plum3', 'Liberal Arts'='hotpink3', 'Party'='lightblue4', 'State'='skyblue2')) +
  labs(title = "Rozkład prawdopodobieństwa zarobków wg typu uczelni",
       x = "Wynagrodzenie Mid-Career w ($)",
       y = "Gęstość występowania",
       fill = "Typ uczelni")
```

Krzywa dla Ivy League jest najbardziej wysunięta na prawo, co ponownie potwierdza moje wcześniejsze wnioski iż przestiż uczelni daje lepszy start w karierze i otwiera drzwi na rozwój. Z ciekawszych obserwacji krzywa dla Engineering jest najszersza i najniższa co sugeruje pewną niepewność zarobkową gdy Party jest bardzo szczupłe i wysunięte do góry. Mimo niższego średniego wynagrodzenia jest ono o wiele pewniejsze niż przykładowo dla Liberal Arts czy State, co niektórzy ludzie sobie cenią w wyborze studiów. Liberal Arts szczególnie na wykresie wręcz "merge"uje State i Engineering. Stoi w limbo między dużą stanową uczelnią a prestiżem uczelni technicznych po któruch wnioskujemy lepsze zarobki.

### Pytanie 9: Porównanie Regionów USA.
Który region oferuje najwiekszą pomoc w przyszłych zarobkach.

```{r}
statsregion <- region %>%
  group_by(Region) %>%
  summarise(
    count = n(),
    mean_start = mean(career_mid, na.rm = TRUE),
    mean_mid = median(career_mid, na.rm = TRUE),
    sd = sd(career_mid, na.rm = TRUE),
    min = min(career_mid, na.rm = TRUE),
    max = max(career_mid, na.rm = TRUE)
  ) %>%
  arrange(desc(mean_mid))

kable(statsregion)
```

Jest to nieuniknione by w internecie nie natrafić na rywalizacje regionów USA. W każdej możliwej dziedzinie czy to edukacja czy muzyka Hip-Hop różne stany z sobą konkurują, spowodowane między innymi przez przeogromn rozmiar geograficzny Ameryki. Przy analizie odznaczające się dwa regiony: Northeastern i California, co nie powinno nikogo zdziwić. To wybrzeże to miejsce powstania prestiżowych uczelni takich jak: MIT, Yale, Princeton czy też Stanford, które reprezentują z sobą dużą sieć do rozwoju studentów i dostęp do najsławniejszego regionu karierowego w Ameryce - Silicon Vallej, zlokalizowany w Kalifornii.

### Pytanie 10: Czy istnieje "Złoty bilet" do lepszych zarobków – i podsumowanie wyników.

```{r, fig.height=8, fig.width=12}
degree %>% 
  arrange(desc(career_start)) %>%
  ggplot(
    aes(x = reorder(major, career_start), y = career_start, fill=category)
  ) +
  geom_col(colour='darkgray', alpha = 0.5) +
  geom_col(
    aes(x = reorder(major, career_mid), y = career_mid), alpha=0.4
  ) +
  scale_fill_manual(values=c('plum2', 'skyblue1')) +
  labs(
    title = "Kierunki - ich wynagrodzenie świeżo po studiach i po 10 latach",
    x = NULL,
    y = "Zarobki w dollarach ($)"
  ) + theme_bw() + 
  theme(axis.text.x = element_text(angle = 90, hjust=1))
```

Ostatni wykres pokazuje pełny krajobraz opłacalności studiów. Choć kolory błękitne (STEM) dominują w górnej części wykresu, potwierdzając swoją rynkową siłę, to rozpiętość słupków fioletowych (Others) ujawnia ogromny potencjał kierunków biznesowych i humanistycznych. Ostatecznie 'Złoty Bilet' to nie tylko wybór kierunku z wysokim startem, ale świadomość, że w niektórych dziedzinach (Economics, Finance) prawdziwy zysk finansowy przychodzi dopiero z czasem, często wyrównując szanse w starciu z inżynierami i informatykami. Dużo zależy od ambicji i starań osobistych studenta i choć uważam, iż "the American Dream" o bogactwie i możliwościach dla wszystkich jest niestety bardzo przekolorowane to szanse na spokojne i wygodne życie tkwieją w każdej dziedzinie.

Mogę jedynie słownie podsumować stan aktualnego wynagrodzenia (a nie tego sprzed 9 lat) w którym nie powinniśmy zobaczyć za dużych różnic z tym co przedstawiłam powyżej. STEM będzie królować na długo, gdyż jest katalistem do kroków w przyszłość - choć próg wejsciowy na ten rynek staje sie coraz trudniejszy (za czym stoi dynamiczny rozwój sztucznej inteligencji). Osobiście uważam, że każdy zawód (nawet lekarski) czuje presje bycia zastąpionym przez AI. 

"Złotym Biletem" na przyszlość to nie tylko co studiujemy ("TE" z pojęcia STEM) ale przede wszystkim gdzie (na zachodnim wybrzeżu Ameryki czy może na AGH..), gdyż doedukować można się przez internet lub publiczne biblioteki ale zawarcie kontaktów przyszłościowych to jedna z największych zalet prestiżowej uczelni.

---

## Źródła naukowe

By zniwelować jakiekolwiek wątpliwości co do samodzielności mojej pracy dołączam źródła zewnętrzne z których korzystałam i nie tylko - dużo moich informacji pochodzi również z dyskusji na StackOverflow i Geeks4Geeks. Dużo linków do zewnętrznych źródeł znalazłam poprzez okna RStudio - Packages & Help.

https://bookdown.org/yihui/rmarkdown/

https://github.com/rstudio/cheatsheets/tree/main  

https://tidyverse.org/  

https://r-charts.com/colors/

https://r-graph-gallery.com/

https://r-graph-gallery.com/histogram_several_group.html

https://r-graph-gallery.com/362-scatter-plot-with-trend-line-and-labels.html

https://r-charts.com/distribution/dumbbell-plot-ggplot2/

https://cran.r-project.org/web/packages/corrplot/vignettes/corrplot-intro.html

https://r-charts.com/correlation/corplot/
